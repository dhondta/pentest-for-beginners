## <!-- .element: class="slideshow-title" --> 5-steps Process : Reconnaissance

<small>by [Alexandre D'Hondt](https://github.com/dhondta), 10/11/16</small>

----

--flowchart--

-----

## 1. Introduction

----

### Purpose

**Gather information**

<br>

- <!-- .element: class="fragment" --> <font color='red'>Often overlooked</font> (least exciting phase)
- <!-- .element: class="fragment" --> Surely the <font color='red'>most critical phase</font>

<br>

<!-- .element: class="fragment" --> If not conducted properly, can lead to poor results for the whole process !

----

### Rewarding skills

1. Hacking
2. <!-- .element: class="fragment" --> Social Engineering
3. <!-- .element: class="fragment" --> Private Investigation

----

### Methodology

1. **Search** for information
2. <!-- .element: class="fragment" --> **Sort** the collected information

<br>

<!-- .element: class="fragment" --> <u>Output</u>: **List of target IP** addresses

----

### Scenario

> "You had been assigned to complete a penetration test but [...] you were given only the company name [...]"
> 
> -- <cite>Engelbretson [[1](#references)]</cite>

<!-- .element: class="fragment" --> So now, how to *go from a single company name to owning the systems inside the network* ?

-----

## 2. Activities

----

### Scope Definition

Ethical hackers have limits due to <font color="red">authorization</font>

<!-- .element: class="fragment" --> &rarr; Carefully define the **list of target systems** !

----

### Discovery of new systems

During the research, some other systems could be found

<!-- .element: class="fragment" --> &rarr; If not owned by the target, cannot be tested ! <br> (cfr **authorization**)

<!-- .element: class="fragment" --> <u>OR</u> eventually ask for a scope extension...

----

### Active vs Passive

- **Active Recon**: <u>interaction</u> with the target
<br> (may be recorded)
<br> <small>*e.g. by requesting a page on a target web server*</small>
- <!-- .element: class="fragment" --> **Passive Recon**: <u>no interaction</u> with the target
<br> (therefore no trace, no logging)
<br> <small>*e.g. by searching on Google*</small>

----

### Information Storage

**Purpose of Recon** = Data collection

Therefore, it is important to:

- <!-- .element: class="fragment" --> Digitally **centralize** data <br> <small>(useful for quick searches, ...)</small>
- <!-- .element: class="fragment" --> **Organize** data

-----

## 3. Techniques & Tools

----

### Search Engines

<div class="column-left">**Description**</div><div class="column-right">
Easiest and fastest way to get useful information out of content indexed by public services.
</div>

<div class="column-left">**Type**</div><div class="column-right">Passive</div>

<div class="column-left">**Tools**</div><div class="column-right">Google, Yahoo!, DuckDuckGo, ...</div>

<div class="column-left">**Findings**</div><div class="column-right">Hosts, public information (key people, open positions, contact data, ...), disclosed content (files, settings, keys, passwords, ...), disclosed information (blog news, ...)</div>

<div class="column-left">**Labs**</div><div class="column-right">
[Google Directives](../../labs/s1-search-engines/index.html#site)
</div>

----

### Open Source Information

<div class="column-left">**Description**</div><div class="column-right">
Gathers means to search for potential unexpected leakages of useful information.
<small>(e.g. an admin tweeting that he just installed a system, mentioning the product and version)</small>
</div>

<div class="column-left">**Type**</div><div class="column-right">Passive</div>

<div class="column-left">**Tools**</div><div class="column-right">Social networks, blogs, newspapers, magazines, ...</div>

<div class="column-left">**Findings**</div><div class="column-right">Public information (open positions, contact data, ...), unexpected information disclosure (recent changes by an admin, ...)</div>

<div class="column-left">**Labs**</div><div class="column-right"><font color="grey">None for the time being</font></div>

----

### Website Archives

<div class="column-left">**Description**</div><div class="column-right">
Can be found on specific public services that keep old copies of websites.
</div>

<div class="column-left">**Type**</div><div class="column-right">Passive</div>

<div class="column-left">**Tools**</div><div class="column-right">Archive.org's Wayback Machine, Archive-It Collections, WebCite</div>

<div class="column-left">**Findings**</div><div class="column-right">Past unexpected information disclosure</div>

<div class="column-left">**Labs**</div><div class="column-right">
[Wayback Machine](../../labs/s1-website-archives/index.html#archiveorg)
</div>

----

### Network Data Search

<div class="column-left">**Description**</div><div class="column-right">
Allows finding technical information from public-facing systems accross the Internet indexed by public services.
</div>

<div class="column-left">**Type**</div><div class="column-right">Passive</div>

<div class="column-left">**Tools**</div><div class="column-right">NetCraft</div>

<div class="column-left">**Findings**</div><div class="column-right">IP, running hardware and software (also history), nameserver, ...</div>

<div class="column-left">**Labs**</div><div class="column-right">
[NetCraft](../../labs/s1-network-data-search/index.html#netcraft)
</div>

----

### Whois Information

<div class="column-left">**Description**</div><div class="column-right">
Provides information about a domain, including its registrar, status and other domain-related data.
</div>

<div class="column-left">**Type**</div><div class="column-right">Passive</div>

<div class="column-left">**Tools**</div><div class="column-right">`whois`, Whois.net, Uwhois.com, Network Solutions Whois</div>

<div class="column-left">**Findings**</div><div class="column-right">IP, nameserver, contact data, registrar, ...</div>

<div class="column-left">**Labs**</div><div class="column-right">
[`whois`](../../labs/s1-whois-information/index.html#whois-command-line-tool) <br>
[Whois.net](../../labs/s1-whois-information/index.html#whoisnet) <br>
[Uwhois.com](../../labs/s1-whois-information/index.html#uwhoiscom) <br>
[Network Solutions Whois](../../labs/s1-whois-information/index.html#network-solutions-whois)
</div>

----

### DNS Interrogation

<div class="column-left">**Description**</div><div class="column-right">
Queries a nameserver to get related hosts information, i.e. this of the target organization in order to eventually retrieve internal hosts information.
</div>

<div class="column-left">**Type**</div><div class="column-right">Active</div>

<div class="column-left">**Tools**</div><div class="column-right">`host`, `dig`, Fierce</div>

<div class="column-left">**Findings**</div><div class="column-right">Target's internal hosts</div>

<div class="column-left">**Labs**</div><div class="column-right">
[`host`](../../labs/s1-dns-interrogation/index.html#host) <br>
[Zone transfers with `dig`](../../labs/s1-dns-interrogation/index.html#dig) <br>
[Zone transfers with Fierce](../../labs/s1-dns-interrogation/index.html#fierce)
</div>

----

### Email Addresses Harvesting

<div class="column-left">**Description**</div><div class="column-right">
Addresses the collection of target organization's email addresses, useful for social engineering ; can be done via search engines, open sources, PGP servers, ...
</div>

<div class="column-left">**Type**</div><div class="column-right">Passive & Active</div>

<div class="column-left">**Tools**</div><div class="column-right">TheHarvester</div>

<div class="column-left">**Findings**</div><div class="column-right">Target's personnel email addresses</div>

<div class="column-left">**Labs**</div><div class="column-right">
[TheHarvester](../../labs/s1-email-harvesting/index.html#theharvester)
</div>

----

### Documents Metadata Search

<div class="column-left">**Description**</div><div class="column-right">
Is the process of searching for target-related files and extracting the metadata stored in the downloaded files such as locations, usernames, ...
</div>

<div class="column-left">**Type**</div><div class="column-right">Active</div>

<div class="column-left">**Tools**</div><div class="column-right">MetaGooFil</div>

<div class="column-left">**Findings**</div><div class="column-right">Information disclosure (through publicly available files)</div>

<div class="column-left">**Labs**</div><div class="column-right">
[MetaGooFil](../../labs/s1-metadata-search/index.html#metagoofil)
</div>

----

### Social Engineering

<div class="column-left">**Description**</div><div class="column-right">
Refers to the manipulation of people for the aim of making them divulg sensitive information.
</div>

<div class="column-left">**Type**</div><div class="column-right">Active</div>

<div class="column-left">**Tools**</div><div class="column-right">Social Engineer Toolkit (SET)</div>

<div class="column-left">**Findings**</div><div class="column-right">Information disclosure (HR or MR data, ...)</div>

<div class="column-left">**Labs**</div><div class="column-right">See Labs of **Step 3 - Exploitation**</div>

----

### Website Cloning

<div class="column-left">**Description**</div><div class="column-right">
Relates to make a page-by-page offline copy of the entire website (including HTML pages, links, pictures, ...).
<small>&nbsp;NB: This will get pages in the format rendered by the server, that is HTML ! Dynamic sites' code cannot be retrieved.</small>
</div>

<div class="column-left">**Type**</div><div class="column-right">Active</div>

<div class="column-left">**Tools**</div><div class="column-right">HTTrack, SiteCloner</div>

<div class="column-left">**Findings**</div><div class="column-right">Information disclosure (through news, announcements, hidden pages, ...)</div>

<div class="column-left">**Labs**</div><div class="column-right">
[HTTrack](../../labs/s1-website-cloning/index.html#httrack) <br>
[SiteCloner](../../labs/s1-website-cloning/index.html#sitecloner)
</div>

----

### Information Extraction

<div class="column-left">**Description**</div><div class="column-right">
Addresses the extraction of specific information out of particular systems such as mail servers.
<small>(e.g. for a mail server, by sending a mail and looking at the returned denial message)</small>
</div>

<div class="column-left">**Type**</div><div class="column-right">Active</div>

<div class="column-left">**Tools**</div><div class="column-right">Nothing special</div>

<div class="column-left">**Findings**</div><div class="column-right">Configuration/Policy/... information disclosure (through what is returned by a server)</div>

<div class="column-left">**Labs**</div><div class="column-right"><font color="grey">None for the time being</font></div>

-----

## 4. Quizz

----

---quizz---

-----

## References

<small>
- [1] Patrick Engelbretson, [*The Basics of Hacking and Penetration Testing: Ethical Hacking and Penetration Testing Made Easy*](https://books.google.com/books?isbn=0124116418), 2nd Ed, 2013.
- [2] SANS Institute, [*SEC504: Hacker Tools, Techniques, Exploits and Incident Handling*](https://www.sans.org/course/hacker-techniques-exploits-incident-handling).

</small>


