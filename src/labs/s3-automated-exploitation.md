!!! danger "Goals"
    1. Practice with Armitage
    2. Gain access to the Metasploitable and Windows XP machines

**Reference**: [Engelbretson, p116]

**Quickstart**:

??? reminder "1. Start Armitage (you can leave default parameters)"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-startup.png "Armitage startup")</p>

??? reminder "2. Let Armitage start Metasploit RPC server"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-startup2.png "Metasploit RPC server startup")</p>

??? reminder "3. Wait for Armitage to connect (no worry about the error message)"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-startup3.png "Connection to the local server")</p>

??? reminder "4. Now, Armitage is ready"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-main.png "Armitage main window")</p>

    1. Exploits/payloads/... browsing pane
    2. Visualization pane (for graphically interacting with Metasploit)
    3. Console pane (for interacting in CLI with Metasploit)


---

### Network Scanning

??? reminder "1. Select *Quick Scan (OS detect)* in the *Hosts* menu"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-scan.png "Scan selection")</p>

??? reminder "2. Enter the network IP range and click *OK*"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-scan-enter-range.png "Network IP range")</p>

??? reminder "3. Now, the scan is complete and the running devices appear in the visualization pane"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-scan-result.png "Scan done")</p>

    !!! note "Adding labels and selecting the right OS"
        By right-clicking on the icon of a device, in the *Host* sub-menu, multiple parameters can be set as the OS or a label.

---

### Launching an Attack

??? reminder "1. Click on a target to select it then go to the *Attacks* menu and click on *Find Attacks*"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-find-attacks.png "Find attacks on a target")</p>

??? reminder "2. Once the analysis completes, a new sub-menu *Attack* can be found by right-clicking the target"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-find-attacks-done.png "Attack analysis is completed")</p>

??? reminder "3. Right-clik on the target, go to sub-menu *Attack* and select an attack, e.g. *ms08_067_netapi*"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-select-attack.png "Attack selection")</p>

??? reminder "4. Leave default parameters and click *Launch*"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-start-attack.png "Launch the attack")</p>

??? reminder "5. The target is owned (depicted by the lightning around it), a new sub-menu *MeterpreterX* can be found by right-clicking the target"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-attack-done.png "The target is now owned")</p>

---

### Getting a shell

??? reminder "1. Right-clik on the target, go to sub-menu *MeterpreterX* and select *Interact* then *Meterpreter Shell*"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-get-meterpreter.png "Get a Meterpreter on the target")</p>

??? reminder "2. A session is now opened with the target"
    <p>![](../../labs/s3-automated-exploitation/img/armitage-meterpreter.png "A Meterpreter is opened on the target")</p>

---

!!! important "Findings"

    **Successful Exploitations**:

    ![](s3-automated-exploitation/img/armitage-metasploitable-owned.png "Metasploitable owned")

    ![](s3-automated-exploitation/img/armitage-meterpreter.png "Windows XP owned")

